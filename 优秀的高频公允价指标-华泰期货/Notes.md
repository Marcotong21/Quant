对于期货做市商而言，为期货合约确定**公允价**是非常重要的。传统衡量公允价的方法包括mid、vwap。

### mid
mid的问题在于，其变化具有高度的自相关性，且其信号相对更加低频。此外，它并没有使用volume的信息，缺少有效的信息。

### vwap
vwap的计算公式为 
$$vwap= \frac{Ask1*BidVolume1 +Bid1*AskVolume1}{BidVolume1+AskVolume1}
$$

其中卖价用买单加权，买价用卖单加权，是因为市场合理的价格应更偏向挂单更少的那一侧。vwap的缺陷是其存在跟多的噪音，以及有时计算会更加反直觉。

### Micro price：更优的公允价
详细参考

todo：

好的,我来解释一下微价格的大致原理和计算逻辑:
本质上,微价格试图从高频订单簿数据中提取价格变动的信号,并对当前中间价格进行调整,得到一个更准确的未来价格预测值。
核心思想是构建一个离散时间、有限状态的马尔可夫模型,其中状态由买卖盘不平衡度(imbalance)和买卖价差(spread)这两个订单簿特征离散化而成。
在这个马尔可夫模型中:

计算当前状态下,下一时刻价格保持不变或发生变动的概率矩阵Q、R1。
计算当前状态向其他状态转移的概率矩阵R2,进而得到整个转移矩阵B。
基于Q、R1和价格变动量K,计算出当前状态下的一步预期价格调整量G1。
利用状态转移矩阵B,对G1进行无限步长前向递推,得到收敛的无限期预期调整量G*。
G*由于是基于远期预期计算的,因此可以过滤掉微观噪音,是对中间价格mid的重要补充调整。
最终的微价格定义为: Micro-Price = Mid-Price + G*

其中G*是一个向量,每个元素对应不同(imbalance,spread)状态的调整量。
整个过程利用了马尔可夫模型从高频数据中提取状态转移规律,并将其应用到无限期预期计算中,从而获得比中间价格和加权中间价格更准确的价格预测值。
通过实证分析,文中发现微价格对未来短期价格变动的预测效果更好,能很好捕捉订单簿信息。
总的来说,微价格模型巧妙地结合了高频数据、马尔可夫模型和无限期预期计算,提出了一种新的价格概念,旨在更好地预测未来价格变动。
